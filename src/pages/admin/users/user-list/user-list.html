<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Manage Users</ion-title>
  </ion-navbar>
</ion-header>
<ion-content no-padding>
  <ion-list>
    <ion-item *ngFor="let user of users | orderBy: 'firstName'" (click)="openUser(user)">
        <h2>{{ user.firstName + ' ' + user.lastName}}</h2>
        <p>{{ user.email }}</p>
        <button *ngIf="!user.organisationApproved" ion-button icon-left color="danger"
                (click)="toggleUserApproval(user, true);$event.stopPropagation();">
          <ion-icon name="cloud-outline"></ion-icon>
          Pending Approval
        </button>
        <button *ngIf="user.organisationApproved" ion-button icon-left color="secondary"
                (click)="toggleUserApproval(user, false);$event.stopPropagation();">
          <ion-icon name="cloud-done"></ion-icon>
          Approved
        </button>
        <button *ngIf="!user.emailVerified" ion-button icon-left color="danger" tappable (click)="resendToken(user);$event.stopPropagation();">
          <ion-icon name="mail"></ion-icon>
          Pending Email Verification
        </button>
        <button *ngIf="user.emailVerified" ion-button icon-left color="secondary" tappable (click)="resendToken(user);$event.stopPropagation();">
          <ion-icon name="mail"></ion-icon>
          Email Verified
        </button>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer padding text-center>
  <h3>Organisation ID {{ tenant?.accessCode }}</h3>
  <p>This identifier is required by users during sign up.</p>
</ion-footer>

